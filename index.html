<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Culinary Quest üçΩÔ∏è</title>

<!-- React + Babel -->
<script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.development.min.js"></script>
<script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.development.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>

<!-- Firebase -->
<script type="module">
  const DEV_MODE = true; // show reset button in dev

  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
  import { getDatabase, ref, onValue, set, remove, get, child, update } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDfwN_5WYj9AKFqDWkEEIrUIwjL8XaZ7oQ",
    authDomain: "culinary-quest-f2777.firebaseapp.com",
    databaseURL: "https://culinary-quest-f2777-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "culinary-quest-f2777",
    storageBucket: "culinary-quest-f2777.firebasestorage.app",
    messagingSenderId: "214188908997",
    appId: "1:214188908997:web:519064cad50efe615e2bac",
    measurementId: "G-EMF9YGM2LT"
  };

  try {
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    window.__CQ_DB__ = db;
    window.__CQ_FB_READY__ = true;
  } catch (e) {
    console.warn("[CQ] Firebase init failed", e);
    window.__CQ_FB_READY__ = false;
  }
  window.__CQ_fb = { ref, onValue, set, remove, get, child, update };
  window.__CQ_DEV__ = { DEV_MODE };
</script>

<style>
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{min-height:100%}
  body{
    font-family:-apple-system,system-ui,"Segoe UI",Roboto,"Helvetica Neue",Arial;
    background:linear-gradient(135deg,#fff8ec,#fdf4e3,#fef9c3);
    color:#1f2937;
  }
  .container{max-width:1000px;margin:0 auto;padding:16px}
  .card{background:#fff;border-radius:14px;padding:18px;box-shadow:0 10px 24px rgba(0,0,0,.12);margin:12px auto}
  .title{font-size:1.9rem;font-weight:900;text-align:center;margin-bottom:6px}
  .subtitle{opacity:.95;text-align:center;margin-bottom:12px}
  .btn{border:none;border-radius:999px;padding:.85rem 1.2rem;font-weight:800;cursor:pointer}
  .btn-lg{padding:1rem 1.45rem;font-size:1.05rem}
  .btn-success{background:#16a34a;color:#fff}
  .btn-danger{background:#dc2626;color:#fff}
  .btn-secondary{background:#ea580c;color:#fff}
  .btn-ghost{
    background:transparent;
    border:1px solid #e5e7eb;
    color:#374151;
    border-radius:10px;
    padding:.55rem .9rem;
  }
  .muted{color:#6b7280}
  .row{display:flex;gap:10px;flex-wrap:wrap}
  .actions{display:flex;gap:12px;justify-content:center;margin-top:14px;flex-wrap:wrap}
  input,textarea{
    width:100%;
    border:1px solid #e5e7eb;
    border-radius:10px;
    padding:.6rem .75rem;
    font-size:16px;
  }
  textarea{min-height:90px;resize:vertical}
  .list{margin-top:10px}
  .list-item{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:.65rem .8rem;
    border:1px solid #eef2f7;
    border-radius:10px;
    background:#fff;
    margin-bottom:8px;
  }
  .badge{
    background:#3b82f6;
    color:#fff;
    font-size:.78rem;
    border-radius:8px;
    padding:.15rem .45rem;
    margin-left:8px;
  }
  .grid-2{display:grid;grid-template-columns:1fr;gap:10px}
  @media(min-width:720px){.grid-2{grid-template-columns:1fr 1fr}}
  .option{
    border:2px solid #e5e7eb;
    border-radius:12px;
    padding:12px;
    background:#fff;
    cursor:pointer;
    transition:box-shadow .2s,border-color .2s;
  }
  .option.selected{border-color:#f59e0b;box-shadow:0 6px 20px rgba(245,158,11,0.18)}
  .option-title{font-weight:900;margin-bottom:3px}
  .option-desc{color:#6b7280}
  .cat-grid{display:grid;grid-template-columns:1fr;gap:8px;margin-top:10px}
  @media(min-width:560px){.cat-grid{grid-template-columns:1fr 1fr}}
  .cat-chip{
    display:flex;
    align-items:center;
    gap:10px;
    border:1px solid #e5e7eb;
    border-radius:10px;
    padding:.6rem .8rem;
    background:#fff;
  }
  .cat-chip input{width:20px;height:20px;margin:0}
  .lock{font-size:.75rem;color:#9ca3af;margin-left:6px}
  .toast{
    position:fixed;
    left:50%;
    bottom:22px;
    transform:translateX(-50%);
    z-index:1100;
    background:#111827;
    color:#fff;
    padding:.6rem 1rem;
    border-radius:999px;
    box-shadow:0 10px 30px rgba(0,0,0,.3);
    font-weight:700;
    opacity:0;
  }
  @keyframes tin{from{opacity:0;transform:translate(-50%,18px)}to{opacity:1;transform:translate(-50%,0)}}
  @keyframes tout{from{opacity:1;transform:translate(-50%,0)}to{opacity:0;transform:translate(-50%,18px)}}
  .toast.show{animation:tin .28s ease-out forwards}
  .fade{opacity:0;animation:fade .28s ease-out forwards}
  @keyframes fade{from{opacity:0}to{opacity:1}}
  .overlay{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.5);
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:1200;
  }
  .modal{
    background:#fff;
    border-radius:12px;
    max-width:520px;
    width:92%;
    padding:16px;
    box-shadow:0 16px 40px rgba(0,0,0,.35);
  }
  .modal h3{margin-bottom:6px}
  .modal-actions{display:flex;gap:10px;justify-content:flex-end;margin-top:12px}
  .logo{width:100px;height:100px;margin:10px auto 0;display:block}
  /* Calendar base styles next part */
</style>
<!-- Simple Calendar + Toast Components + Helper Functions -->
<style>
  .calendar {
    display:flex; flex-direction:column; gap:6px; align-items:center; margin:10px 0;
  }
  .calendar input[type="date"], .calendar input[type="time"] {
    border:1px solid #ddd;
    border-radius:10px;
    padding:.6rem .8rem;
    font-size:1rem;
  }
  .calendar label {
    font-weight:700;
    margin-top:8px;
  }
  .splash-slogan {
    text-align:center;
    font-style:italic;
    opacity:.9;
    margin-top:6px;
  }
  .reset-btn {
    position:fixed;
    bottom:20px;
    right:20px;
    background:#ef4444;
    color:#fff;
    padding:10px 16px;
    border-radius:999px;
    font-weight:700;
    cursor:pointer;
    box-shadow:0 4px 14px rgba(0,0,0,.25);
    z-index:2000;
    display:none;
  }
</style>
</head>
<body>
  <div id="root"></div>
  <div id="resetBtn" class="reset-btn" onclick="resetGameData()">üßπ Reset Game Data</div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    const slogans = [
      "üçΩÔ∏è Cook. Compete. Conquer.",
      "üî• Your dining table just became centre stage!",
      "ü•á Who will be crowned the Culinary Conquistador?",
      "üé≠ Every bite earns a score. Every dish tells a story.",
      "ü•Ç One kitchen. One crown. Infinite bragging rights.",
      "üé¨ Because every great meal deserves a little drama.",
      "üî• Fire up the oven ‚Äî it‚Äôs showtime!",
      "‚ú® Serve your best. Score the rest."
    ];

    const getRandomSlogan = () => slogans[Math.floor(Math.random() * slogans.length)];

    function Toast({ message }) {
      const [show, setShow] = useState(false);
      useEffect(() => {
        if (message) {
          setShow(true);
          const t = setTimeout(() => setShow(false), 1600);
          return () => clearTimeout(t);
        }
      }, [message]);
      return message ? (
        <div className={"toast" + (show ? " show" : "")}>{message}</div>
      ) : null;
    }

    function SplashScreen({ onContinue }) {
      const [slogan, setSlogan] = useState(getRandomSlogan());
      useEffect(() => {
        const interval = setInterval(() => setSlogan(getRandomSlogan()), 36000);
        return () => clearInterval(interval);
      }, []);
      const [organiserName, setOrganiserName] = useState("");

      return (
        <div className="container fade">
          <img src="https://cdn-icons-png.flaticon.com/512/1046/1046784.png" alt="logo" className="logo"/>
          <div className="card">
            <h2 className="title">üé© Step right up, Master of Ceremonies!</h2>
            <p>As the Organiser, you‚Äôre hosting the grandest dining spectacle your friends have ever seen.</p>
            <ul style={{marginTop:"10px",marginBottom:"10px",paddingLeft:"18px"}}>
              <li>üéØ Choose your scoring style ‚Äî single score or category-by-category showdown.</li>
              <li>üë• Add your contestants and send their personalised invite links.</li>
              <li>üìÖ Wait for RSVPs as each player locks in a unique hosting date.</li>
            </ul>
            <p>Once the line-up is complete, review the schedule and hit <b>Start Competition</b> to launch your Quest.</p>
            <p>üí° Optional twist: add a mystery prize for the champion!</p>
            <p style={{marginTop:"12px"}}>Now tell us your name and let‚Äôs begin.</p>
            <input
              placeholder="Your name"
              value={organiserName}
              onChange={e => setOrganiserName(e.target.value)}
              style={{marginTop:"10px",marginBottom:"14px"}}
            />
            <div className="actions">
              <button className="btn btn-success" disabled={!organiserName.trim()} onClick={()=>onContinue(organiserName.trim())}>Continue</button>
              <button className="btn btn-danger" onClick={()=>{alert('Come back soon!'); window.close?.();}}>Cancel</button>
            </div>
          </div>
          <p className="splash-slogan">{slogan}</p>
        </div>
      );
    }

    function CategorySelect({ selected, toggle }) {
      const categories = [
        "Table Setting", "Entertainment", "Menu", "Food", "Drinks"
      ];
      return (
        <div className="cat-grid">
          {categories.map(c => (
            <label key={c} className="cat-chip">
              <input
                type="checkbox"
                checked={selected.includes(c)}
                disabled={c==="Food"}
                onChange={() => toggle(c)}
              /> {c} {c==="Food" && <span className="lock">(required)</span>}
            </label>
          ))}
        </div>
      );
    }

    function ResetButton() {
      const resetGame = async () => {
        const saved = JSON.parse(localStorage.getItem('cq_active_game') || '{}');
        if (!saved.gameId) {
          alert("No active game found.");
          return;
        }
        if (!confirm("This will delete the current game and clear all data. Continue?")) return;
        try {
          if (window.__CQ_FB_READY__) {
            const { ref, remove } = window.__CQ_fb;
            await remove(ref(window.__CQ_DB__, `games/${saved.gameId}`));
          }
          localStorage.removeItem('cq_active_game');
          alert("Game data cleared. Reloading fresh‚Ä¶");
          location.href = location.origin + location.pathname;
        } catch (err) {
          console.error(err);
          alert("Error clearing game. Check console.");
        }
      };
      return (
        <div id="devReset" className="reset-btn" onClick={resetGame}>üßπ Reset Game Data</div>
      );
    }
    function ScoringMode({ organiserName, onNext, onCancel }) {
      const [mode, setMode] = useState("overall");
      const [selectedCats, setSelectedCats] = useState(["Food"]);
      const toggleCat = c => {
        setSelectedCats(prev => prev.includes(c)
          ? prev.filter(x => x !== c)
          : prev.length < 4 ? [...prev, c] : prev);
      };

      const proceed = () => {
        const cfg = { organiserName, mode, categories: selectedCats };
        onNext(cfg);
      };

      return (
        <div className="container fade">
          <div className="card">
            <h2 className="title">Scoring Options</h2>
            <p>Choose how your players will score each dinner:</p>
            <div className="grid-2" style={{marginTop:"12px"}}>
              <div className={"option" + (mode==="overall"?" selected":"")} onClick={()=>setMode("overall")}>
                <div className="option-title">Overall Score</div>
                <div className="option-desc">Each player rates the evening out of 10.</div>
              </div>
              <div className={"option" + (mode==="category"?" selected":"")} onClick={()=>setMode("category")}>
                <div className="option-title">Category Scoring</div>
                <div className="option-desc">Rate up to four categories (Food required).</div>
              </div>
            </div>
            {mode==="category" && (
              <>
                <p style={{marginTop:"10px"}}>Select up to 4 categories:</p>
                <CategorySelect selected={selectedCats} toggle={toggleCat}/>
                <p style={{marginTop:"8px"}} className="muted">You can also add your own categories later.</p>
              </>
            )}
            <div className="actions">
              <button className="btn btn-success" onClick={proceed}>Continue to Add Guests</button>
              <button className="btn btn-danger" onClick={onCancel}>Cancel</button>
            </div>
          </div>
        </div>
      );
    }

    function AddGuests({ cfg, onNext, onCancel }) {
      const [guests, setGuests] = useState([]);
      const [name, setName] = useState("");

      const addGuest = () => {
        if (!name.trim()) return;
        setGuests([...guests, name.trim()]);
        setName("");
      };

      return (
        <div className="container fade">
          <div className="card">
            <h2 className="title">Add Guests</h2>
            <p>Enter the names of everyone competing. You‚Äôll send each an invitation link next.</p>
            <div className="row" style={{marginTop:"12px"}}>
              <input placeholder="Guest name" value={name} onChange={e=>setName(e.target.value)}
                onKeyDown={e=>e.key==="Enter"&&addGuest()}/>
              <button className="btn btn-secondary" onClick={addGuest}>Add</button>
            </div>
            <div className="list">
              {guests.map((g,i)=><div key={i} className="list-item">{g}</div>)}
            </div>
            <div className="actions">
              <button className="btn btn-success" disabled={!guests.length} onClick={()=>onNext({...cfg, guests})}>Create Guest Access Links</button>
              <button className="btn btn-danger" onClick={onCancel}>Cancel</button>
            </div>
          </div>
        </div>
      );
    }

    function InviteLinks({ cfg, onNext, onCancel }) {
      const [links,setLinks] = useState([]);

      useEffect(()=>{
        const gameId = "cq_" + Math.random().toString(36).substring(2,9);
        const db = window.__CQ_DB__;
        const { ref, set } = window.__CQ_fb;
        const parts = [cfg.organiserName, ...cfg.guests];
        const gameData = {
          organiser: cfg.organiserName,
          players: parts,
          mode: cfg.mode,
          categories: cfg.categories,
          rsvp: Object.fromEntries(parts.map((_,i)=>[i,0])),
          st: 1
        };
        set(ref(db, `games/${gameId}`), gameData);
        localStorage.setItem("cq_active_game", JSON.stringify({ gameId, contestantId: 0 }));
        setLinks(parts.map((_,i)=>{
          const url = `${location.origin}${location.pathname}?game=${gameId}&c=${i}`;
          return {name:parts[i],url};
        }));
      },[]);

      const copy = url => {
        navigator.clipboard.writeText(url);
        alert("Link copied!");
      };

      return (
        <div className="container fade">
          <div className="card">
            <h2 className="title">Invitation Links</h2>
            <p>Copy and send each link to the corresponding guest.</p>
            <div className="list">
              {links.map((l,i)=>(
                <div key={i} className="list-item">
                  <span>{l.name}</span>
                  <button className="btn-ghost" onClick={()=>copy(l.url)}>Copy Invitation Link</button>
                </div>
              ))}
            </div>
            <div className="actions">
              <button className="btn btn-success" onClick={()=>onNext(cfg)}>Completed Sending Links</button>
              <button className="btn btn-danger" onClick={onCancel}>Cancel</button>
            </div>
          </div>
        </div>
      );
    }
     function RSVPTracker({ cfg, onStartGame }) {
      const [game, setGame] = useState(null);
      const [toast, setToast] = useState("");
      const [loading, setLoading] = useState(true);

      const db = window.__CQ_DB__;
      const { ref, onValue, update } = window.__CQ_fb;
      const saved = JSON.parse(localStorage.getItem("cq_active_game") || "{}");
      const gameId = saved.gameId;

      const getMyId = () => {
        try {
          const s = JSON.parse(localStorage.getItem("cq_active_game") || "{}");
          if (typeof s.contestantId === "number") return s.contestantId;
        } catch {}
        const qs = new URLSearchParams(location.search);
        const p = qs.get("c");
        return p ? parseInt(p, 10) : null;
      };

      const myId = getMyId();

      useEffect(() => {
        if (!gameId) return;
        const unsub = onValue(ref(db, `games/${gameId}`), snap => {
          setGame(snap.val());
          setLoading(false);
        });
        return () => unsub();
      }, [gameId]);

      const canStart = () => {
        if (!game) return false;
        const allAccepted = Object.values(game.rsvp).every(v => v === 1);
        const dates = Object.values(game.d || {});
        const unique = new Set(dates);
        return allAccepted && unique.size === dates.length;
      };

      const accept = (date, time) => {
        if (!date) return alert("Please choose a date first.");
        update(ref(db, `games/${gameId}`), {
          [`rsvp/${myId}`]: 1,
          [`d/${myId}`]: date,
          [`t/${myId}`]: time || ""
        });
        setToast("üìÖ Your hosting date is confirmed!");
      };

      const startGame = () => {
        update(ref(db, `games/${gameId}`), { st: 2 });
        onStartGame();
      };

      if (loading) return <div className="container"><p>Loading RSVP tracker‚Ä¶</p></div>;
      if (!game) return <div className="container"><p>Game not found.</p></div>;

      const allPlayers = game.players || [];
      const organiserName = allPlayers[0] || "Organiser";

      return (
        <div className="container fade">
          <div className="card">
            <h2 className="title">RSVP Tracker</h2>

            {/* Organiser RSVP section */}
            {myId === 0 && !game.rsvp?.[0] && (
              <div className="calendar">
                <h4>Your Hosting Date</h4>
                <input type="date" id="myDate"/>
                <input type="time" id="myTime"/>
                <button className="btn btn-success" style={{marginTop:"10px"}}
                  onClick={()=>{
                    const d = document.getElementById("myDate").value;
                    const t = document.getElementById("myTime").value;
                    accept(d,t);
                  }}>‚úÖ Accept Invitation</button>
              </div>
            )}

            {/* List of all players */}
            <div className="list" style={{marginTop:"14px"}}>
              {allPlayers.map((p,i)=>(
                <div key={i} className="list-item">
                  <span>{p}</span>
                  {game.rsvp?.[i] ? (
                    <span className="muted">
                      Accepted {game.d?.[i] ? `‚Äî ${game.d[i]} ${game.t?.[i]||""}` : ""}
                    </span>
                  ) : <span className="badge">Pending</span>}
                </div>
              ))}
            </div>

            {/* Start game button for organiser */}
            {myId === 0 && (
              <div className="actions">
                <button className="btn btn-success" disabled={!canStart()} onClick={startGame}>
                  Let the Games Begin
                </button>
                <button className="btn btn-danger" onClick={()=>{
                  if(confirm("Cancel setup? All progress lost.")){
                    const { ref, remove } = window.__CQ_fb;
                    remove(ref(window.__CQ_DB__, `games/${gameId}`));
                    localStorage.removeItem("cq_active_game");
                    location.reload();
                  }
                }}>Cancel</button>
              </div>
            )}

            {myId !== 0 && (
              <p style={{marginTop:"12px"}} className="muted">
                When all participants have responded, {organiserName} will progress the game status to ‚ÄòLet‚Äôs Go!‚Äô
              </p>
            )}
          </div>
          <Toast message={toast}/>
        </div>
      );
    }

    // Gameplay placeholder logic next part
    function Gameplay({ onFinish }) {
      const saved = JSON.parse(localStorage.getItem("cq_active_game") || "{}");
      const gameId = saved.gameId;
      const db = window.__CQ_DB__;
      const { ref, onValue, update } = window.__CQ_fb;
      const [game,setGame] = useState(null);
      const [toast,setToast] = useState("");
      const [score,setScore] = useState("");
      const [comment,setComment] = useState("");
      const [submitting,setSubmitting] = useState(false);

      const myId = (()=> {
        try {
          const s = JSON.parse(localStorage.getItem('cq_active_game') || '{}');
          if (typeof s.contestantId === 'number') return s.contestantId;
        } catch {}
        const qs = new URLSearchParams(location.search);
        const p = qs.get('c');
        return p ? parseInt(p,10) : null;
      })();

      useEffect(()=>{
        if(!gameId)return;
        const unsub = onValue(ref(db,`games/${gameId}`),snap=>setGame(snap.val()));
        return ()=>unsub();
      },[gameId]);

      if(!game)return<div className="container"><p>Loading game...</p></div>;

      const submitScore = ()=>{
        if(!score.trim())return alert("Enter a score first!");
        setSubmitting(true);
        update(ref(db,`games/${gameId}/scores/${myId}`),{score:parseFloat(score),comment});
        setToast("ü•Ñ Score locked in ‚Äî let‚Äôs see how the rankings simmer.");
        setTimeout(()=>setSubmitting(false),1200);
      };

      return(
        <div className="container fade">
          <div className="card">
            <h2 className="title">Submit Your Score</h2>
            <p>Score the current host‚Äôs dinner experience out of 10.</p>
            <input type="number" step="0.1" max="10" min="0" placeholder="Score"
              value={score} onChange={e=>setScore(e.target.value)}/>
            <textarea placeholder="Optional comments" value={comment}
              onChange={e=>setComment(e.target.value)}></textarea>
            <div className="actions">
              <button className="btn btn-success" disabled={submitting} onClick={submitScore}>Submit</button>
            </div>
          </div>
          <Toast message={toast}/>
        </div>
      );
    }

    function Results() {
      const saved = JSON.parse(localStorage.getItem("cq_active_game") || "{}");
      const gameId = saved.gameId;
      const db = window.__CQ_DB__;
      const { ref, onValue } = window.__CQ_fb;
      const [game,setGame]=useState(null);

      useEffect(()=>{
        if(!gameId)return;
        const unsub = onValue(ref(db,`games/${gameId}`),snap=>setGame(snap.val()));
        return ()=>unsub();
      },[gameId]);

      if(!game)return<div className="container"><p>Loading results...</p></div>;

      const scores=Object.entries(game.scores||{})
        .map(([id,val])=>({name:game.players[id],score:val.score||0}))
        .sort((a,b)=>b.score-a.score);
      const winner=scores[0];

      return(
        <div className="container fade">
          <div className="card">
            <h2 className="title">üèÜ Final Results</h2>
            {winner?
              <p>üé∫ Drumroll, please... presenting our <b>Culinary Conquistador</b>!<br/>
              <b>{winner.name}</b> with a score of {winner.score.toFixed(1)}!</p>:
              <p>No scores yet.</p>}
            <h4 style={{marginTop:"14px"}}>Leaderboard</h4>
            <ul style={{listStyle:"none",padding:0}}>
              {scores.map((s,i)=><li key={i}>{i+1}. {s.name} ‚Äî {s.score.toFixed(1)}</li>)}
            </ul>
          </div>
        </div>
      );
    }

    function App(){
      const [phase,setPhase]=useState("setup");
      const [cfg,setCfg]=useState(null);

      const goToRSVP = c => setPhase("rsvp");
      const goToGame = ()=>setPhase("game");
      const goToResults = ()=>setPhase("results");

      if(phase==="setup")return<SplashScreen onContinue={n=>setCfg({organiserName:n})}/>;
      if(cfg && phase==="mode")return<ScoringMode organiserName={cfg.organiserName} onNext={c=>{setCfg(c);setPhase("guests");}} onCancel={()=>setPhase("setup")}/>;
      if(cfg && phase==="guests")return<AddGuests cfg={cfg} onNext={c=>{setCfg(c);setPhase("links");}} onCancel={()=>setPhase("setup")}/>;
      if(cfg && phase==="links")return<InviteLinks cfg={cfg} onNext={()=>setPhase("rsvp")} onCancel={()=>setPhase("setup")}/>;
      if(phase==="rsvp")return<RSVPTracker cfg={cfg} onStartGame={()=>setPhase("game")}/>;
      if(phase==="game")return<Gameplay onFinish={goToResults}/>;
      if(phase==="results")return<Results/>;
      return null;
    }

    // Reset button for DEV_MODE
    if(window.__CQ_DEV__?.DEV_MODE){
      document.getElementById("resetBtn").style.display="block";
    }

    ReactDOM.createRoot(document.getElementById("root")).render(
      <>
        <App/>
        <ResetButton/>
      </>
    );
  </script>
</body>
</html>
